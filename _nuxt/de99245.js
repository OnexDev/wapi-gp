(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{198:function(t,e,r){var content=r(207);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(56).default)("d9b13144",content,!0,{sourceMap:!1})},200:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTciIGhlaWdodD0iNTYiIHZpZXdCb3g9IjAgMCA1NyA1NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGxpbmUgeDE9IjMuODI4NDMiIHkxPSIzLjE3MTU3IiB4Mj0iNTMuODI4NCIgeTI9IjUzLjE3MTYiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iOCIvPgo8bGluZSB4MT0iNTIuODI4NCIgeTE9IjIuODI4NDMiIHgyPSIyLjgyODQzIiB5Mj0iNTIuODI4NCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSI4Ii8+Cjwvc3ZnPgo="},201:function(t,e,r){"use strict";var n=r(2),o=r(58),c=r(18),l=r(11),d=r(5),f=r(202),h=r(110),m=r(203),v=r(204),y=r(57),w=r(205),x=[],I=x.sort,C=d((function(){x.sort(void 0)})),_=d((function(){x.sort(null)})),k=h("sort"),N=!d((function(){if(y)return y<70;if(!(m&&m>3)){if(v)return!0;if(w)return w<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)x.push({k:t+r,v:e})}for(x.sort((function(a,b){return b.v-a.v})),r=0;r<x.length;r++)t=x[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:C||!_||!k||!N},{sort:function(t){void 0!==t&&o(t);var e=c(this);if(N)return void 0===t?I.call(e):I.call(e,t);var r,n,d=[],h=l(e.length);for(n=0;n<h;n++)n in e&&d.push(e[n]);for(r=(d=f(d,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:String(e)>String(r)?1:-1}}(t))).length,n=0;n<r;)e[n]=d[n++];for(;n<h;)delete e[n++];return e}})},202:function(t,e){var r=Math.floor,n=function(t,e){var l=t.length,d=r(l/2);return l<8?o(t,e):c(n(t.slice(0,d),e),n(t.slice(d),e),e)},o=function(t,e){for(var element,r,n=t.length,i=1;i<n;){for(r=i,element=t[i];r&&e(t[r-1],element)>0;)t[r]=t[--r];r!==i++&&(t[r]=element)}return t},c=function(t,e,r){for(var n=t.length,o=e.length,c=0,l=0,d=[];c<n||l<o;)c<n&&l<o?d.push(r(t[c],e[l])<=0?t[c++]:e[l++]):d.push(c<n?t[c++]:e[l++]);return d};t.exports=n},203:function(t,e,r){var n=r(54).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},204:function(t,e,r){var n=r(54);t.exports=/MSIE|Trident/.test(n)},205:function(t,e,r){var n=r(54).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},206:function(t,e,r){"use strict";r(198)},207:function(t,e,r){var n=r(55)(!1);n.push([t.i,".flex[data-v-7c3be93a]{display:flex;justify-content:space-between;align-items:flex-end}.flex .field[data-v-7c3be93a]:not(:last-child){margin-bottom:0}.flex .field[data-v-7c3be93a]{width:calc(100% - 120px)}.field.has-addons .control[data-v-7c3be93a]{width:100%}.progress-wrapper[data-v-7c3be93a]{margin-top:15px}.b-checkbox[data-v-7c3be93a]{outline:none;-webkit-tap-highlight-color:transparent}.b-checkbox.checkbox input[type=checkbox]:focus:checked+.check[data-v-7c3be93a]{box-shadow:none}p.help[data-v-7c3be93a]{position:absolute}.weather-info li[data-v-7c3be93a],.weather-info li a[data-v-7c3be93a]{display:flex;align-items:center;margin:15px 0}.weather-info li img.del[data-v-7c3be93a]{width:15px;margin-left:auto;justify-self:flex-end;opacity:.5;cursor:pointer}.weather-info li .wrapper[data-v-7c3be93a]{background:#7957d5;min-width:50px;width:50px;height:50px;display:block;position:relative;margin-right:15px;border-radius:50%}.weather-info li .wrapper img[data-v-7c3be93a]{mix-blend-mode:color-dodge}",""]),t.exports=n},211:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(44),r(35),r(33),r(34),r(29),r(43),r(201),r(15),r(152),r(30),{name:"HomePage",components:{},data:function(){return{filterByName:"",filterByWeather:!1,sortParam:"name",data:[],input_type:"",inputValueOfCity:"",radioButton:"",errorPull:"",city:[524925,525184,524901,536203,1486209,1489425,1489474,554234]}},created:function(){var t=this;this.$nuxt.$on("changedItem",(function(e){t.$set(t.data,t.data.map((function(t){t.id==e.id&&(t.name=e.message,console.log(t.id+" - "+e.id+" - "+t.name))}))),t.data.push(t.data.filter((function(t){return t.id==e.id}))[0].name=e.message),console.log(t.data)}))},computed:{filteredItems:function(){var t=this.filterByName,e=this.filterByWeather;return this.data.filter((function(r){return e?(""===t||r.name.toLowerCase().indexOf(t.toLowerCase())>-1)&&"ясно"==r.weather[0].description:""===t||r.name.toLowerCase().indexOf(t.toLowerCase())>-1}))},orderedItems:function(){switch(this.sortParam){case"name":return this.filteredItems.sort(c);case"temp":return this.filteredItems.sort(l);default:return this.filteredItems}}},methods:{getCelseTemp:function(data){return Math.round(data-273)},addNewCity:function(t){var e=this;""!==this.inputValueOfCity?(this.input_type="is-primary",fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(this.inputValueOfCity,"&lang=ru&appid=a7b7478ece778d4363053ebdbadd7249")).then((function(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e})).then((function(t){return t.json()})).then((function(t){return e.data.push(t)})).catch((function(t){e.input_type="is-danger"}))):this.input_type="is-danger"},removeCity:function(t){var e=this.data.indexOf(t);this.data.splice(e,1)}},mounted:function(){var t=this;console.log(this.data);var e=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.city.forEach((function(e,i){fetch("https://api.openweathermap.org/data/2.5/weather?id=".concat(e,"&lang=ru&appid=a7b7478ece778d4363053ebdbadd7249")).then((function(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e})).then((function(t){return t.json()})).then((function(e){return t.data.push(e)})).catch((function(e){t.errorPull=e.message,console.log("Error: "+e.message),console.log(e.response)}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null!=this.$nuxt.data||e()}}),c=function(t,e){return t.name.toLowerCase()>e.name.toLowerCase()?1:-1},l=function(t,e){return t.main.temp<e.main.temp?1:-1},d=o,f=(r(206),r(36)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("b-field",[n("b-input",{attrs:{placeholder:"Название"},model:{value:t.filterByName,callback:function(e){t.filterByName=e},expression:"filterByName"}})],1),t._v(" "),n("b-field",[n("b-checkbox",{model:{value:t.filterByWeather,callback:function(e){t.filterByWeather=e},expression:"filterByWeather"}},[t._v("\n      Включать только районы где сейчас ясно\n    ")])],1),t._v(" "),n("b-field",[n("b-radio-button",{attrs:{"native-value":"name",type:"is-primary is-light is-outlined"},model:{value:t.sortParam,callback:function(e){t.sortParam=e},expression:"sortParam"}},[n("span",[t._v("Название")])]),t._v(" "),n("b-radio-button",{attrs:{"native-value":"temp",type:"is-primary is-light is-outlined"},model:{value:t.sortParam,callback:function(e){t.sortParam=e},expression:"sortParam"}},[n("span",[t._v("Температура")])])],1),t._v(" "),0!=this.data?n("div",[n("ul",{staticClass:"weather-info"},t._l(t.orderedItems,(function(e){return n("li",{key:e.name},[n("NuxtLink",{attrs:{to:{name:"posts-id",params:{id:e.id,name:e.name}}}},[n("div",{staticClass:"wrapper"},[n("img",{attrs:{src:"https://openweathermap.org/img/wn/"+e.weather[0].icon+".png"}})]),t._v(" "),n("span",[t._v("\n            "+t._s(e.name)+" - "+t._s(e.weather[0].description)+" -\n            "+t._s(t.getCelseTemp(e.main.temp))+"°\n          ")])]),t._v(" "),n("img",{staticClass:"del",attrs:{src:r(200),alt:""},on:{click:function(r){return t.removeCity(e)}}})],1)})),0)]):""!=this.errorPull?n("div",{},[t._v("\n    Произошла критическая ошибка!"),n("br"),t._v("\n    "+t._s(t.errorPull)+"\n  ")]):n("div",{},[n("span",[t._v("Выгружаем данные по городам...")]),t._v(" "),n("b-progress",{attrs:{type:"is-primary mt"}})],1),t._v(" "),n("div",{staticClass:"flex"},[n("b-field",{attrs:{type:t.input_type,label:"Название города (eng)"}},[n("b-input",{model:{value:t.inputValueOfCity,callback:function(e){t.inputValueOfCity=e},expression:"inputValueOfCity"}})],1),t._v(" "),n("b-button",{attrs:{type:"is-primary"},on:{click:t.addNewCity}},[t._v("Добавить")])],1)],1)}),[],!1,null,"7c3be93a",null);e.default=component.exports}}]);